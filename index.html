<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demande de Devis – Salakta Voyages</title>

    <!-- Police Corporate Premium -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
    body {
        margin: 0;
        font-family: 'Inter', sans-serif;
        background: #0a1a2f;
        color: #ffffff;
        position: relative;
        overflow-x: hidden;
    }

    /* MAP en arrière-plan */
    body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/World_map_-_low_resolution.svg/2000px-World_map_-_low_resolution.svg.png');
        background-size: cover;
        background-position: center;
        opacity: 1;
        filter: grayscale(100%);
        z-index: -1;
    }

    /* HEADER PREMIUM */
    header {
        text-align: center;
        padding: 40px 20px;
        border-bottom: 2px solid rgba(212, 164, 55, 0.35);
    }

    header img {
        width: 400px;
        margin-bottom: 3px;
    }

    header h1 {
        font-size: 34px;
        font-weight: 700;
        color: #d4a437;
        letter-spacing: 1px;
    }

    /* CONTAINER FORMULAIRE */
    .form-wrapper {
        max-width: 1200px;
        margin: 40px auto;
        background: rgba(255, 255, 255, 0.35);
        color: #0a1a2f;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0px 20px 50px rgba(0,0,0,0.35);
        backdrop-filter: blur(12px);
    }

    h2.section-title {
        font-size: 26px;
        font-weight: 700;
        color: #0a1a2f;
        border-left: 5px solid #d4a437;
        padding-left: 12px;
        margin-bottom: 20px;
    }

    .section-block {
        max-width: 700px;
        margin: 0 auto 35px auto;
        padding: 25px;
        border: 1px solid rgba(255,255,255,0.35);
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(6px);
    }

    /* STYLE CHAMPS */
    .input-style,
    select,
    input[type="date"],
    textarea {
        width: 100%;
        max-width: 450px;
        margin: 0 auto 15px auto;
        display: block;
        padding: 12px 14px;
        border-radius: 10px;
        border: 1px solid #c7cbd1;
        font-size: 15px;
        transition: 0.25s;
    }

    .input-style:focus,
    select:focus,
    textarea:focus {
        border-color: #d4a437;
        box-shadow: 0 0 0 3px rgba(212, 164, 55, 0.35);
        outline: none;
    }

    /* ---------- ICÔNE DANS SELECT Compagnie Aérienne ---------- */

    .select-icon {
        background-repeat: no-repeat;
        background-position: 12px center;
        background-size: 22px;
        padding-left: 45px; /* espace pour icône */
        transition: 0.25s;
    }

    /* Icône affichée quand value = "" */
    .select-icon[value=""] {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='35' width='20' viewBox='0 0 640 640'%3E%3Cpath fill='%23001f47' d='M320 312C253.7 312 200 258.3 200 192C200 125.7 253.7 72 320 72C386.3 72 440 125.7 440 192C440 258.3 386.3 312 320 312zM289.5 368L350.5 368C360.2 368 368 375.8 368 385.5C368 389.7 366.5 393.7 363.8 396.9L336.4 428.9L367.4 544L368 544L402.6 405.5C404.8 396.8 413.7 391.5 422.1 394.7C484 418.3 528 478.3 528 548.5C528 563.6 515.7 575.9 500.6 575.9L139.4 576C124.3 576 112 563.7 112 548.6C112 478.4 156 418.4 217.9 394.8C226.3 391.6 235.2 396.9 237.4 405.6L272 544.1L272.6 544.1L303.6 429L276.2 397C273.5 393.8 272 389.8 272 385.6C272 375.9 279.8 368.1 289.5 368.1z'/%3E%3C/svg%3E");
    }

    /* BOUTON SUBMIT */
    .submit-btn {
        background: #d4a437;
        color: #0a1a2f;
        font-weight: 700;
        padding: 16px 40px;
        border-radius: 50px;
        font-size: 18px;
        border: none;
        cursor: pointer;
        transition: 0.3s;
    }

    .submit-btn:hover {
        background: #b88c26;
        transform: translateY(-2px);
    }

    .submit-btn:active {
        transform: translateY(1px);
    }

    /* TRANSPORT CARDS */
    .section-block label,
    .section-block label span {
        color: #0a1a2f !important;
    }

    .transport-options {
        display: flex;
        gap: 25px;
        flex-wrap: wrap;
        justify-content: center;
    }

    .transport-card {
        background: #ffffff;
        border-radius: 18px;
        padding: 18px 22px;
        display: flex;
        gap: 18px;
        align-items: center;
        min-width: 260px;
        cursor: pointer;
        border: 2px solid transparent;
        transition: 0.3s;
        box-shadow: 0 4px 14px rgba(0,0,0,0.08);
    }

    .transport-card:hover {
        border-color: #d4a437;
        transform: translateY(-3px);
    }

    .transport-card input {
        display: none;
    }

    .transport-card input:checked + .icon-wrap {
        box-shadow: 0 0 12px rgba(212,164,55,0.65);
        border: 2px solid #d4a437;
    }

    .icon-wrap {
        width: 60px;
        height: 60px;
        background: #f2f5fa;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: 0.35s;
        box-shadow: 0 0 0 rgba(212,164,55,0);
    }

    .transport-card:hover .icon-wrap {
        transform: scale(1.08);
    }

    .transport-text h4 {
        margin: 0;
        font-size: 18px;
        font-weight: 700;
        color: #0a1a2f;
    }

    .transport-text p {
        margin: 2px 0 0;
        color: #4b5563;
        font-size: 14px;
    }
.select-icon-arrivee {
    background-repeat: no-repeat;
    background-position: 12px center;
    background-size: 20px;
    padding-left: 45px;
}

/* Icône affichée quand aucune valeur sélectionnée */
.select-icon-arrivee[value=""] {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='14' width='14' viewBox='0 0 640 640'%3E%3Cpath fill='%23001f47' d='M418.6 257.1L297.9 67.7C293.1 60.1 285.3 54.9 276.5 53.4L233.4 45.8C222.6 43.9 213.2 53.1 214.8 63.9L238.8 225.5L133.8 207L100 145.2C96.5 138.7 90.2 134.2 83.1 133L66 130C56.2 128.3 47.2 135.9 47.2 145.8L47.8 252.1C48 283 70.2 309.4 100.7 314.8L114.2 317.2L531.8 390.8C562.3 396.2 591.3 375.8 596.7 345.4C602.1 315 581.7 285.9 551.3 280.5L418.6 257.1zM256 448C273.7 448 288 433.7 288 416C288 398.3 273.7 384 256 384C238.3 384 224 398.3 224 416C224 433.7 238.3 448 256 448zM387.2 432.7C387.2 415 372.9 400.7 355.2 400.7C337.5 400.7 323.2 415 323.2 432.7C323.2 450.4 337.5 464.7 355.2 464.7C372.9 464.7 387.2 450.4 387.2 432.7zM64 512C46.3 512 32 526.3 32 544C32 561.7 46.3 576 64 576L576 576C593.7 576 608 561.7 608 544C608 526.3 593.7 512 576 512L64 512z'/%3E%3C/svg%3E");
}
.select-icon-depart{
    background-repeat: no-repeat;
    background-position: 12px center;
    background-size: 20px;
    padding-left: 45px;
}

/* Icône affichée quand aucune valeur sélectionnée */
.select-icon-depart[value=""] {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='14' width='14' viewBox='0 0 640 640'%3E%3Cpath d='M404 207.9L204.7 104.2C196.7 100.1 187.4 99.4 179 102.5L137.9 117.5C127.6 121.2 124.1 133.9 130.8 142.5L232.3 270.4L132.1 306.8L72 270.2C65.8 266.4 58.2 265.7 51.3 268.1L35 274.1C25.6 277.5 21.6 288.6 26.7 297.2L80.3 389C95.9 415.7 128.4 427.4 157.4 416.8L170.3 412.1L568.7 267.1C597.8 256.5 612.7 224.4 602.2 195.3C591.7 166.2 559.5 151.3 530.4 161.8L404 207.9zM64.2 512C46.5 512 32.2 526.3 32.2 544C32.2 561.7 46.5 576 64.2 576L576.2 576C593.9 576 608.2 561.7 608.2 544C608.2 526.3 593.9 512 576.2 512L64.2 512z' fill='%23001f47'/%3E%3C/svg%3E");
}
.type-buttons {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.type-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 20px;
    background: white;
    border: 2px solid #d4af37; /* Doré */
    border-radius: 12px;
    cursor: pointer;
    font-size: 16px;
    transition: 0.25s;
    color: #333;
}

.type-btn svg {
    height: 20px;
    width: 20px;
    fill: #d4af37;
}

.type-btn.active {
    background: #d4af37;
    color: #000;
}

.type-btn.active svg {
    fill: #1E3050;
}
input[type="date"] {
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 640'><path fill='%23d4af37' d='M224 64C241.7 64 256 78.3 256 96L256 128L384 128L384 96C384 78.3 398.3 64 416 64C433.7 64 448 78.3 448 96L448 128L480 128C515.3 128 544 156.7 544 192L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 192C96 156.7 124.7 128 160 128L192 128L192 96C192 78.3 206.3 64 224 64zM160 304L160 336C160 344.8 167.2 352 176 352L208 352C216.8 352 224 344.8 224 336L224 304C224 295.2 216.8 288 208 288L176 288C167.2 288 160 295.2 160 304zM288 304L288 336C288 344.8 295.2 352 304 352L336 352C344.8 352 352 344.8 352 336L352 304C352 295.2 344.8 288 336 288L304 288C295.2 288 288 295.2 288 304zM432 288C423.2 288 416 295.2 416 304L416 336C416 344.8 423.2 352 432 352L464 352C472.8 352 480 344.8 480 336L480 304C480 295.2 472.8 288 464 288L432 288zM160 432L160 464C160 472.8 167.2 480 176 480L208 480C216.8 480 224 472.8 224 464L224 432C224 423.2 216.8 416 208 416L176 416C167.2 416 160 423.2 160 432zM304 416C295.2 416 288 423.2 288 432L288 464C288 472.8 295.2 480 304 480L336 480C344.8 480 352 472.8 352 464L352 432C352 423.2 344.8 416 336 416L304 416zM416 432L416 464C416 472.8 423.2 480 432 480L464 480C472.8 480 480 472.8 480 464L480 432C480 423.2 472.8 416 464 416L432 416C423.2 416 416 423.2 416 432z'/></svg>");
    background-repeat: no-repeat;
    background-size: 20px;
    background-position: 12px center; /* position left */
    padding-left: 45px !important;    /* espace pour l’icône */
}
/*partie icon en dore*/
.transport-card {
    display: flex;
    align-items: center;
    gap: 15px;
    cursor: pointer;
}

/* Cacher le radio natif */
.transport-card input {
    display: none;
}

/* Icône grise par défaut */
.transport-card .icon-wrap svg path {
    fill: #1E3050; /* gris */
    transition: fill 0.3s ease;
}

/* Quand le bouton est sélectionné → icône dorée */
.transport-card input:checked + .icon-wrap svg path {
    fill: #d4af37; /* or */
}

/* Texte normal */
.transport-card .transport-text h4,
.transport-card .transport-text p {
    margin: 0;
}
/* Icône dans SELECT Compagnie Maritime */
.select-icon-maritime {
    background-repeat: no-repeat;
    background-position: 12px center;
    background-size: 22px;
    padding-left: 45px; /* espace pour l’icône */
    transition: 0.25s;
}

/* Icône quand aucune valeur n’est sélectionnée */
.select-icon-maritime[value=""] {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 640'%3E%3Cpath fill='%23001f47' d='M224 96C224 78.3 238.3 64 256 64L384 64C401.7 64 416 78.3 416 96L416 128L464 128C508.2 128 544 163.8 544 208V336C544 337 544 338 544 338C544 368 536 397 522 424L509 448C486 436 462 432 438 432C405 432 373 442 345 463C324 480 316 480 295 463C267 442 234 432 200 432C177 432 154 437 132 448L118 424C103 397 96 368 96 338C96 337 96 336 96 336V208C96 163 132 128 176 128H224V96z'/%3E%3C/svg%3E");
}


</style>

</head>
<body>

<header>
    <img src="logo1.0.png" alt="Logo Salakta Voyages" />
    <h1>Demande de Devis</h1>
</header>



    <!-- FORMULAIRE COMPLET INTEGRE -->
<form id="travelForm">

    <!-- SECTION 1: MODE DE TRANSPORT -->
    <div class="section-block">
        <h2 class="section-title">1. Mode de Transport</h2>
        <div class="transport-options">

<!-- AVION -->
<label class="transport-card">
    <input type="radio" name="mode" value="avion" required>

    <div class="icon-wrap">
        <svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" viewBox="0 0 640 640">
            <path d="M264 88C264 57.1 289.1 32 320 32C350.9 32 376 57.1 376 88L376 215.3L549.6 374.5C556.2 380.6 560 389.1 560 398.1L560 441.8C560 452.7 549.3 460.4 538.9 457L376 402.7L376 502.4L442 555.2C445.8 558.2 448 562.8 448 567.7L448 587.5C448 597.9 438.2 605.5 428.1 603L320 576L211.9 603C201.8 605.5 192 597.9 192 587.5L192 567.7C192 562.8 194.2 558.2 198 555.2L264 502.4L264 402.7L101.1 457C90.7 460.4 80 452.7 80 441.8L80 398.1C80 389.1 83.8 380.6 90.4 374.5L264 215.3L264 88z"/>
        </svg>
    </div>

    <div class="transport-text">
        <h4>Avion</h4>
        <p>Vols réguliers & charters</p>
    </div>
</label>

<!-- BATEAU -->
<label class="transport-card">
    <input type="radio" name="mode" value="bateau" required>

    <div class="icon-wrap">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M224 96C224 78.3 238.3 64 256 64L384 64C401.7 64 416 78.3 416 96L416 128L464 128C508.2 128 544 163.8 544 208L544 336L543.9 336C544 336.7 544 337.3 544 338C544 368.2 536.4 397.8 522 424.3L509.3 447.6L508.7 448.6C486.4 437.3 462.2 431.8 437.9 431.9C405.4 432.1 373 442.6 345.5 463.3C323.4 479.9 316.4 479.9 294.3 463.3C266.2 442.2 233 431.7 199.9 431.9C176.3 432.1 152.8 437.6 131.2 448.6L130.6 447.6L117.9 424.3C103.5 397.8 95.9 368.1 95.9 338C95.9 337.3 95.9 336.6 96 336L95.9 336L95.9 208C95.9 163.8 131.7 128 175.9 128L223.9 128L223.9 96zM160 320L480 320L480 208C480 199.2 472.8 192 464 192L176 192C167.2 192 160 199.2 160 208L160 320zM403.4 540.1C379.1 558.3 351.1 576 320 576C288.9 576 260.9 558.3 236.6 540.1C215.3 524 186.7 524 165.4 540.1C141.6 558 111.3 575.6 77.3 575.4C56.9 575.3 36.6 568.7 17.5 554.3C6.9 546.3 4.8 531.3 12.8 520.7C20.8 510.1 35.8 508 46.4 516C57.7 524.5 68 527.4 77.6 527.5C95.2 527.6 114.9 518.1 136.5 501.8C174.9 472.8 227 472.8 265.5 501.8C289.5 519.9 306.2 528.1 320 528.1C333.8 528.1 350.5 519.9 374.5 501.8C412.9 472.8 465 472.8 503.5 501.8C520.4 514.5 536.4 523.3 551.3 526.4C565 529.2 578.7 527.3 593.6 516.1C604.2 508.1 619.2 510.2 627.2 520.8C635.2 531.4 633.1 546.4 622.5 554.4C596.1 574.3 568.3 578.8 541.8 573.5C516.5 568.4 493.7 554.6 474.6 540.2C453.3 524.1 424.7 524.1 403.4 540.2z"/></svg>
    </div>
<div class="transport-text">
        <h4>Bateau</h4>
        <p>Traversées & croisières</p>
    </div>
</label>

</div>
    </div>

    <!-- CHAMPS BATEAU -->
    <div id="bateauFields" class="section-block" style="display:none;">
        <h3 class="section-title"><svg xmlns="http://www.w3.org/2000/svg" height="40" width="40" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#FFD43B" d="M272 64C245.5 64 224 85.5 224 112L224 128L208 128C163.8 128 128 163.8 128 208L128 316.8L106.4 325.4C91.6 331.3 83.9 347.8 89 362.9C99.4 394.2 115.8 422.2 136.7 446C156.8 436.8 178.4 432.1 200 432C233.1 431.8 266.3 442.2 294.4 463.4L296 464.6L296 249.6L192 291.2L192 208C192 199.2 199.2 192 208 192L432 192C440.8 192 448 199.2 448 208L448 291.2L344 249.6L344 464.6L345.6 463.4C373.1 442.7 405.5 432.2 438 432C460.3 431.9 482.6 436.5 503.3 446C524.2 422.3 540.6 394.2 551 362.9C556 347.7 548.4 331.3 533.6 325.4L512 316.8L512 208C512 163.8 476.2 128 432 128L416 128L416 112C416 85.5 394.5 64 368 64L272 64zM403.4 540.1C424.7 524 453.3 524 474.6 540.1C493.6 554.5 516.5 568.3 541.8 573.4C568.3 578.8 596.1 574.2 622.5 554.3C633.1 546.3 635.2 531.3 627.2 520.7C619.2 510.1 604.2 508 593.6 516C578.7 527.2 565 529.1 551.3 526.3C536.4 523.3 520.4 514.4 503.5 501.7C465.1 472.7 413 472.7 374.5 501.7C350.5 519.8 333.8 528 320 528C306.2 528 289.5 519.8 265.5 501.7C227.1 472.7 175 472.7 136.5 501.7C114.9 518 95.2 527.5 77.6 527.4C68 527.3 57.7 524.4 46.4 515.9C35.8 507.9 20.8 510 12.8 520.6C4.8 531.2 7 546.3 17.6 554.3C36.7 568.7 57 575.3 77.4 575.4C111.3 575.6 141.7 558 165.5 540.1C186.8 524 215.4 524 236.7 540.1C260.9 558.4 289 576 320.1 576C351.2 576 379.2 558.3 403.5 540.1z"/></svg> Voyage en Bateau</h3>

        <label>Compagnie Maritime</label>
        <select id="compagnieMaritime" name="compagnieMaritime" class="input-style select-icon-maritime">
            <option value="">Sélectionnez une compagnie</option>
            <option value="CTN">CTN</option>
            <option value="GNV">GNV</option>
            <option value="Grimaldi">Grimaldi</option>
            <option value="Corsica Linea">Corsica Linea</option>
        </select>

        <label>Destination</label>
        <select id="destinationBateau" name="destinationBateau" class="input-style" disabled>
            <option value="">Sélectionnez une compagnie</option>
        </select>

        <label style="margin-top:15px;display:flex;align-items:center;gap:10px;">
            <input type="checkbox" id="avecVehicule" name="avecVehicule"> Voyager avec véhicule <svg xmlns="http://www.w3.org/2000/svg" height="40" width="40" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#FFD43B" d="M199.2 181.4L173.1 256L466.9 256L440.8 181.4C436.3 168.6 424.2 160 410.6 160L229.4 160C215.8 160 203.7 168.6 199.2 181.4zM103.6 260.8L138.8 160.3C152.3 121.8 188.6 96 229.4 96L410.6 96C451.4 96 487.7 121.8 501.2 160.3L536.4 260.8C559.6 270.4 576 293.3 576 320L576 512C576 529.7 561.7 544 544 544L512 544C494.3 544 480 529.7 480 512L480 480L160 480L160 512C160 529.7 145.7 544 128 544L96 544C78.3 544 64 529.7 64 512L64 320C64 293.3 80.4 270.4 103.6 260.8zM192 368C192 350.3 177.7 336 160 336C142.3 336 128 350.3 128 368C128 385.7 142.3 400 160 400C177.7 400 192 385.7 192 368zM480 400C497.7 400 512 385.7 512 368C512 350.3 497.7 336 480 336C462.3 336 448 350.3 448 368C448 385.7 462.3 400 480 400z"/></svg>
        </label>

        <div id="vehiculeFields" style="display:none;margin-top:15px;" class="section-block">
            <h4>Détails du véhicule</h4>
            <input class="input-style" name="marqueVehicule" placeholder="Marque" id="marqueVehicule">
            <input class="input-style" name="modeleVehicule" placeholder="Modèle" id="modeleVehicule">
            <input class="input-style" name="plaqueVehicule" placeholder="Plaque" id="plaqueVehicule">
        </div>
    </div>

    <!-- CHAMPS AVION -->
    <div id="avionFields" class="section-block" style="display:none;">
        <h3 class="section-title"><svg xmlns="http://www.w3.org/2000/svg" height="40" width="40" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#FFD43B" d="M232 88C232 57.1 257.1 32 288 32C318.9 32 344 57.1 344 88L344 215.3L422 286.8C352.7 315.8 304 384.2 304 464C304 513.3 322.6 558.3 353.1 592.3L288 576L179.9 603C169.8 605.5 160 597.9 160 587.5L160 567.7C160 562.8 162.2 558.2 166 555.2L232 502.4L232 402.7L69.1 457C58.7 460.4 48 452.7 48 441.8L48 398.1C48 389.1 51.8 380.6 58.4 374.5L232 215.3L232 88zM352 464C352 384.5 416.5 320 496 320C575.5 320 640 384.5 640 464C640 543.5 575.5 608 496 608C416.5 608 352 543.5 352 464zM553.4 403.1C546.3 397.9 536.2 399.5 531 406.6L478 479.5L451.2 452.7C445 446.5 434.8 446.5 428.6 452.7C422.4 458.9 422.4 469.1 428.6 475.3L468.6 515.3C471.9 518.6 476.5 520.3 481.2 519.9C485.9 519.5 490.1 517.1 492.9 513.4L556.9 425.4C562.1 418.3 560.5 408.2 553.4 403.1z"/></svg> Voyage en Avion</h3>

        <label>Compagnie Aérienne</label>
        <select id="compagnieAerienne" name="compagnieAerienne" class="select-icon input-style">
            <option value=""> Sélectionnez une compagnie</option>
            <option value="Tunisair">Tunisair</option>
            <option value="Nouvelair">Nouvelair</option>
        </select>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:15px;">
            <div>
                <label>Aéroport de Départ</label>
                <select id="aeroportDepart" name="aeroportDepart" class="input-style select-icon-depart" disabled>
                    <option value="">Sélectionnez une compagnie</option>
                </select>
            </div>
            <div>
                <label>Aéroport d'Arrivée</label>
                <select id="aeroportArrivee" name="aeroportArrivee" class="input-style select-icon-arrivee" disabled>
                    <option value="">Sélectionnez une compagnie</option>
                </select>
            </div>
        </div>
    </div>

    <!-- CABINES / CLASSES -->
    <div id="cabinTypeSection" class="section-block" style="display:none;">
        <h2 class="section-title">2. Type de Cabine / Classe</h2>

        <div id="cabinBateauFields" style="display:none;">
            <label>Type de cabine (Bateau)</label>
            <select id="typeCabineBateau" class="input-style"></select>
        </div>

        <div id="cabinAvionFields" style="display:none;"> <label>Classe (Avion)</label> <select id="typeClasseAvion" name="typeClasseAvion" class="input-style"> <option value="">-- Choisir Une Class --/option> <option value="Economique">Économique</option> <option value="Affaires">Affaires</option> <option value="Premiere">Première</option> </select> </div>
    </div>
</div>
    </div>

    <!-- DATES VOYAGE -->
<div id="datesSection" class="section-block" style="display:none;">
    <h2 class="section-title">3. Dates et Type de Voyage</h2>

    <label>Type</label>

    <div class="type-buttons">
        <button type="button" class="type-btn" data-value="allerSimple">
            <span class="icon">
                <!-- ICON -->
                <svg xmlns="http://www.w3.org/2000/svg" height="14" width="14" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M566.6 342.6C579.1 330.1 579.1 309.8 566.6 297.3L406.6 137.3C394.1 124.8 373.8 124.8 361.3 137.3C348.8 149.8 348.8 170.1 361.3 182.6L466.7 288L96 288C78.3 288 64 302.3 64 320C64 337.7 78.3 352 96 352L466.7 352L361.3 457.4C348.8 469.9 348.8 490.2 361.3 502.7C373.8 515.2 394.1 515.2 406.6 502.7L566.6 342.7z"/></svg>
                </svg>
            </span>
            Aller Simple
        </button>

        <button type="button" class="type-btn" data-value="allerRetour">
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="14" width="14" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M566.6 214.6L470.6 310.6C458.1 323.1 437.8 323.1 425.3 310.6C412.8 298.1 412.8 277.8 425.3 265.3L466.7 224L96 224C78.3 224 64 209.7 64 192C64 174.3 78.3 160 96 160L466.7 160L425.3 118.6C412.8 106.1 412.8 85.8 425.3 73.3C437.8 60.8 458.1 60.8 470.6 73.3L566.6 169.3C579.1 181.8 579.1 202.1 566.6 214.6zM169.3 566.6L73.3 470.6C60.8 458.1 60.8 437.8 73.3 425.3L169.3 329.3C181.8 316.8 202.1 316.8 214.6 329.3C227.1 341.8 227.1 362.1 214.6 374.6L173.3 416L544 416C561.7 416 576 430.3 576 448C576 465.7 561.7 480 544 480L173.3 480L214.7 521.4C227.2 533.9 227.2 554.2 214.7 566.7C202.2 579.2 181.9 579.2 169.4 566.7z"/></svg>
                </svg>
            </span>
            Aller-Retour
        </button>

        <button type="button" class="type-btn" data-value="retourDifferent">
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="14" width="14" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M406.6 41.4C394.1 28.9 373.8 28.9 361.3 41.4L265.3 137.4C252.8 149.9 252.8 170.2 265.3 182.7C277.8 195.2 298.1 195.2 310.6 182.7L352 141.3L352 337.2C333.2 326.3 311.3 320.1 288 320.1L173.3 320.1L214.7 278.7C227.2 266.2 227.2 245.9 214.7 233.4C202.2 220.9 181.9 220.9 169.4 233.4L73.4 329.4C60.9 341.9 60.9 362.2 73.4 374.7L169.4 470.7C181.9 483.2 202.2 483.2 214.7 470.7C227.2 458.2 227.2 437.9 214.7 425.4L173.3 384L288 384C323.3 384 352 412.7 352 448C352 518.7 409.3 576 480 576L512 576C529.7 576 544 561.7 544 544C544 526.3 529.7 512 512 512L480 512C444.7 512 416 483.3 416 448L416 141.3L457.4 182.7C469.9 195.2 490.2 195.2 502.7 182.7C515.2 170.2 515.2 149.9 502.7 137.4L406.7 41.4z"/></svg>
            </span>
            Retour Différent
        </button>
    </div>

    <input type="hidden" id="typeVoyage" name="typeVoyage">

    <label>Date Aller</label>
    <input type="date" id="dateAller" name="dateAller" class="input-style" required>

    <div id="dateRetourContainer" style="display:none;margin-top:15px;">
        <label>Date Retour</label>
        <input type="date" id="dateRetour" name="dateRetour" class="input-style">
    </div>

    <div id="retourDifferentFields" style="display:none;margin-top:20px;" class="section-block">
        <label>Ville/Port du retour différent</label>
        <input class="input-style" id="villeRetour" placeholder="Ville ou port…">
    </div>
</div>

    <!-- PASSAGERS -->
    <div id="passengersSection" class="section-block" style="display:none;">
        <h2 class="section-title">4.<svg xmlns="http://www.w3.org/2000/svg" height="40" width="40" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#FFD43B" d="M320 312C386.3 312 440 258.3 440 192C440 125.7 386.3 72 320 72C253.7 72 200 125.7 200 192C200 258.3 253.7 312 320 312zM290.3 368C191.8 368 112 447.8 112 546.3C112 562.7 125.3 576 141.7 576L498.3 576C514.7 576 528 562.7 528 546.3C528 447.8 448.2 368 349.7 368L290.3 368z"/></svg> Passagers</h2>

        <div class="section-block" style="background:white;">
            <h3>Passager Principal</h3>
            <label>Nom</label>
            <input class="input-style" placeholder="Nom" name="nomPrincipal" id="nomPrincipal"  required>
            <label>Prénom</label>
            <input class="input-style" placeholder="Prénom" name="prenomPrincipal" id="prenomPrincipal" required>
            <label>Date de naissance</label>
            <input type="date" class="input-style" name="dateNaissancePrincipal"  id="dateNaissancePrincipal" required>
            <label>Lieu de naissance</label>
            <input class="input-style" placeholder="Lieu de naissance"  name="lieuNaissancePrincipal" id="lieuNaissancePrincipal" required>
            <label>Nationalité</label>
            <input class="input-style" placeholder="Nationalité" name="nationalitePrincipal" id="nationalitePrincipal" required>
            <label>N° Passeport</label>
	    <input class="input-style" placeholder="N° Passeport"  name="numPasseportPrincipal" id="numPasseportPrincipal" required>
            <label>Expiration Passeport</label>
            <input type="date" class="input-style" name="dateExpirationPasseportPrincipal" id="dateExpirationPasseportPrincipal" required>
            <label>Email</label>
            <input class="input-style" placeholder="Email" name="emailPrincipal" id="emailPrincipal" required>
            <label>Téléphone</label>
            <input class="input-style" placeholder="Téléphone" name="telephonePrincipal" id="telephonePrincipal">
        </div>
<div id="additionalPassengers" style="margin-top:20px;"></div>
        <button type="button" onclick="addPassengerField()" class="submit-btn" style="margin-top:20px;"><svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M320 80C377.4 80 424 126.6 424 184C424 241.4 377.4 288 320 288C262.6 288 216 241.4 216 184C216 126.6 262.6 80 320 80zM96 152C135.8 152 168 184.2 168 224C168 263.8 135.8 296 96 296C56.2 296 24 263.8 24 224C24 184.2 56.2 152 96 152zM0 480C0 409.3 57.3 352 128 352C140.8 352 153.2 353.9 164.9 357.4C132 394.2 112 442.8 112 496L112 512C112 523.4 114.4 534.2 118.7 544L32 544C14.3 544 0 529.7 0 512L0 480zM521.3 544C525.6 534.2 528 523.4 528 512L528 496C528 442.8 508 394.2 475.1 357.4C486.8 353.9 499.2 352 512 352C582.7 352 640 409.3 640 480L640 512C640 529.7 625.7 544 608 544L521.3 544zM472 224C472 184.2 504.2 152 544 152C583.8 152 616 184.2 616 224C616 263.8 583.8 296 544 296C504.2 296 472 263.8 472 224zM160 496C160 407.6 231.6 336 320 336C408.4 336 480 407.6 480 496L480 512C480 529.7 465.7 544 448 544L192 544C174.3 544 160 529.7 160 512L160 496z"/></svg>➕ Ajouter un passager</button>

        

        <label style="margin-top:20px;display:block;">Notes</label>
        <textarea name="paragrapheLibre" id="paragrapheLibre" class="input-style" rows="4" placeholder="Demandes spéciales…"></textarea>
    </div>

    <!-- SUBMIT -->
    <div style="text-align:center;margin-top:40px;">
        <button type="submit" id="submitButton" class="submit-btn">Demander un devis</button>
    </div>
<div style="
    margin-top:30px;
    padding:15px;
    color:#ff4444;
    font-weight:600;
    text-align:center;
    font-size:16px;
">
    Merci de bien vérifier les informations. Toute modification après l’achat du billet entraîne des frais appliqués par la compagnie de voyage. Merci pour votre compréhension.
</div>
    <div id="messageBox" style="display:none;margin-top:20px;padding:15px;border-radius:12px;text-align:center;font-weight:600;"></div>

</form>

<!-- SCRIPTS ORIGINAUX REPRIS 100% -->
<script>
/* -------------------------
   JS optimisé - Version réécrite
   Objectifs : lisibilité, moins de duplication, gestion robuste des selects, init claire
   ------------------------- */
(function(){
  'use strict';

  const GOOGLE_SHEETS_WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbwmueX4uAdOBOoGKpKie-ps4BJf1vVIONAv0Q0R3l8k20HnQheLy5ubev5AcGJXCMhz/exec';

  const BATEAU_DESTINATIONS = {
    'CTN': [
      { v: 'tunis-marseille', l: 'Tunis - Marseille' },
      { v: 'marseille-tunis', l: 'Marseille - Tunis' },
      { v: 'tunis-genes', l: 'Tunis - Gênes' },
      { v: 'genes-tunis', l: 'Gênes - Tunis' }
    ],
    'GNV': [
      { v: 'tunis-genes', l: 'Tunis - Gênes' },
      { v: 'genes-tunis', l: 'Gênes - Tunis' },
      { v: 'tunis-palermo', l: 'Tunis - Palerme' },
      { v: 'palermo-tunis', l: 'Palerme - Tunis' },
      { v: 'tunis-civitavecchia', l: 'Tunis - Civitavecchia' },
      { v: 'civitavecchia-tunis', l: 'Civitavecchia - Tunis' }
    ],
    'Grimaldi': [
      { v: 'tunis-salerno', l: 'Tunis - Salerne' },
      { v: 'salerno-tunis', l: 'Salerne - Tunis' },
      { v: 'tunis-palermo', l: 'Tunis - Palerme' },
      { v: 'palermo-tunis', l: 'Palerme - Tunis' }
    ],
    'Corsica Linea': [
      { v: 'tunis-marseille', l: 'Tunis - Marseille' },
      { v: 'marseille-tunis', l: 'Marseille - Tunis' }
    ]
  };

  const AVION_AEROPORTS = {
    'Tunisair': [
      { v: 'tun', l: 'Tunis-Carthage (TUN), Tunisie' },
      { v: 'mir', l: 'Monastir (MIR), Tunisie' },
      { v: 'dje', l: 'Djerba (DJE), Tunisie' },
      { v: 'nbe', l: 'Enfidha (NBE), Tunisie' },
      { v: 'par', l: 'Paris (CDG/ORY), France' },
      { v: 'mrs', l: 'Marseille (MRS), France' },
      { v: 'nce', l: 'Nice (NCE), France' },
      { v: 'lyo', l: 'Lyon (LYS), France' },
      { v: 'ist', l: 'Istanbul (IST), Turquie' }
    ],
    'Nouvelair': [
      { v: 'tun', l: 'Tunis-Carthage (TUN), Tunisie' },
      { v: 'mir', l: 'Monastir (MIR), Tunisie' },
      { v: 'dje', l: 'Djerba (DJE), Tunisie' },
      { v: 'nbe', l: 'Enfidha (NBE), Tunisie' },
      { v: 'par', l: 'Paris (CDG/ORY), France' },
      { v: 'mrs', l: 'Marseille (MRS), France' },
      { v: 'nce', l: 'Nice (NCE), France' },
      { v: 'lys', l: 'Lyon (LYS), France' },
      { v: 'man', l: 'Manchester (MAN), Royaume-Uni' }
    ]
  };

  const DEFAULT_CABIN_OPTIONS = [
    { v: 'fauteuil', l: 'Fauteuil' },
    { v: 'prive_sans_hublot', l: 'Cabine privée (sans hublot)' },
    { v: 'prive_avec_hublot', l: 'Cabine privée (avec hublot)' },
    { v: 'partage_sans_hublot', l: 'Cabine partagée (sans hublot)' },
    { v: 'partage_avec_hublot', l: 'Cabine partagée (avec hublot)' }
  ];

  const GRIMALDI_CABIN_OPTIONS = [
    { v: 'passager_pont', l: 'Passager pont (sans place assignée)', grimaldiOnly: true },
    ...DEFAULT_CABIN_OPTIONS
  ];

  // Helpers
  const $ = (sel, ctx=document) => ctx.querySelector(sel);
  const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

  // Element refs
  const els = {
    compagnieMaritime: $('#compagnieMaritime'),
    destinationBateau: $('#destinationBateau'),
    typeCabineBateau: $('#typeCabineBateau'),
    compagnieAerienne: $('#compagnieAerienne'),
    aeroportDepart: $('#aeroportDepart'),
    aeroportArrivee: $('#aeroportArrivee'),

    bateauFields: $('#bateauFields'),
    avionFields: $('#avionFields'),
    cabinTypeSection: $('#cabinTypeSection'),
    cabinBateauFields: $('#cabinBateauFields'),
    cabinAvionFields: $('#cabinAvionFields'),
    datesSection: $('#datesSection'),
    passengersSection: $('#passengersSection'),

    avecVehicule: $('#avecVehicule'),
    vehiculeFields: $('#vehiculeFields'),

    travelForm: $('#travelForm'),
    submitButton: $('#submitButton'),
    messageBox: $('#messageBox'),

    additionalPassengers: $('#additionalPassengers')
  };
function resetAllFieldsExceptMode() {

    // Réinitialiser les sections spécifiques
    els.compagnieMaritime.value = "";
    els.destinationBateau.innerHTML = '<option value="">Sélectionnez une compagnie</option>';
    els.destinationBateau.disabled = true;

    els.compagnieAerienne.value = "";
    els.aeroportDepart.innerHTML = '<option value="">Sélectionnez une compagnie</option>';
    els.aeroportArrivee.innerHTML = '<option value="">Sélectionnez une compagnie</option>';
    els.aeroportDepart.disabled = true;
    els.aeroportArrivee.disabled = true;

    // Reset cabines et classes
    $('#typeCabineBateau').value = "";
    $('#typeClasseAvion').value = "";

    // Reset dates
    $('#dateAller').value = "";
    $('#dateRetour').value = "";
    $('#villeRetour').value = "";
    $('#dateRetourContainer').style.display = "none";
    $('#retourDifferentFields').style.display = "none";

    // Reset notes
    $('#paragrapheLibre').value = "";

    // Supprimer tous les passagers ajoutés
    els.additionalPassengers.innerHTML = "";
    passengerCount = 0;

    // Reset passager principal
    [
        'nomPrincipal','prenomPrincipal','dateNaissancePrincipal',
        'lieuNaissancePrincipal','nationalitePrincipal','numPasseportPrincipal',
        'dateExpirationPasseportPrincipal','emailPrincipal','telephonePrincipal'
    ].forEach(id => { const e = document.getElementById(id); if(e) e.value=""; });

    // Reset véhicule
    els.avecVehicule.checked = false;
    els.vehiculeFields.style.display = "none";
    ['marqueVehicule','modeleVehicule','plaqueVehicule'].forEach(id=>{
        const e = document.getElementById(id); if(e) e.value="";
    });
}


const comp = document.getElementById("compagnieAerienne");

function updateCompIcon() {
    comp.setAttribute("value", comp.value);
}

updateCompIcon();
comp.addEventListener("change", updateCompIcon);
const compMar = document.getElementById("compagnieMaritime");

function updateMaritimeIcon() {
    compMar.setAttribute("value", compMar.value);
}

updateMaritimeIcon();
compMar.addEventListener("change", updateMaritimeIcon);


  // Populate select utility
  function populateSelect(selectEl, items, placeholderText='-- Choisissez --'){
    selectEl.innerHTML = '';
    const p = document.createElement('option');
    p.value = '';
    p.textContent = placeholderText;
    selectEl.appendChild(p);
    items.forEach(it => {
      const o = document.createElement('option');
      o.value = it.v || it.value;
      o.textContent = it.l || it.label;
      if (it.disabled) o.disabled = true;
      selectEl.appendChild(o);
    });
    selectEl.disabled = false;
  }

  // Bateau: destinations + cabines
  function updateBateauOptions(){
    const comp = els.compagnieMaritime.value;
    if(!comp){
      els.destinationBateau.innerHTML = '<option value="">Sélectionnez une compagnie</option>';
      els.destinationBateau.disabled = true;
    } else {
      const routes = BATEAU_DESTINATIONS[comp] || [];
      populateSelect(els.destinationBateau, routes, '-- Choisissez une route --');
    }

    // Cabines
    const cabins = comp === 'Grimaldi' ? GRIMALDI_CABIN_OPTIONS : DEFAULT_CABIN_OPTIONS;
    // If an option is grimaldiOnly and comp !== Grimaldi mark disabled
    const cabinItems = cabins.map(c => ({ v: c.v, l: c.l, disabled: c.grimaldiOnly && comp !== 'Grimaldi' }));
    populateSelect(els.typeCabineBateau, cabinItems, '-- Choisissez un type de cabine --');
  }

  // Avion: aéroports
  function updateAvionFields(){
    const comp = els.compagnieAerienne.value;
    const airports = AVION_AEROPORTS[comp] || [];
    if(!comp){
      els.aeroportDepart.innerHTML = '<option value="">Sélectionnez une compagnie</option>';
      els.aeroportArrivee.innerHTML = '<option value="">Sélectionnez une compagnie</option>';
      els.aeroportDepart.disabled = true;
      els.aeroportArrivee.disabled = true;
      return;
    }
    populateSelect(els.aeroportDepart, airports, "-- Choisissez l'aéroport de départ --");
    populateSelect(els.aeroportArrivee, airports, "-- Choisissez l'aéroport d'arrivée --");
  }

  // Update which sections are visible based on chosen transport
  function updateFormFields(){
    const mode = document.querySelector('input[name="mode"]:checked')?.value || null;
resetAllFieldsExceptMode();

    const visible = !!mode;

    // show/hide shared sections
    els.datesSection.style.display = visible ? 'block' : 'none';
    els.passengersSection.style.display = visible ? 'block' : 'none';
    els.cabinTypeSection.style.display = visible ? 'block' : 'none';

    if(mode === 'bateau'){
      els.bateauFields.style.display = 'block';
      els.avionFields.style.display = 'none';
      els.cabinBateauFields.style.display = 'block';
      els.cabinAvionFields.style.display = 'none';
    } else if(mode === 'avion'){
      els.avionFields.style.display = 'block';
      els.bateauFields.style.display = 'none';
      els.cabinAvionFields.style.display = 'block';
      els.cabinBateauFields.style.display = 'none';
    } else {
      els.bateauFields.style.display = 'none';
      els.avionFields.style.display = 'none';
      els.cabinBateauFields.style.display = 'none';
      els.cabinAvionFields.style.display = 'none';
    }

    // Reset fields when switching
    if(mode !== 'bateau'){
      els.compagnieMaritime.value = '';
      updateBateauOptions();
      if(els.avecVehicule) {
        els.avecVehicule.checked = false;
        toggleVehiculeFields();
      }
    }
    if(mode !== 'avion'){
      els.compagnieAerienne.value = '';
      updateAvionFields();
      const cls = $('#typeClasseAvion'); if(cls) cls.value = '';
    }
  }

  function toggleVehiculeFields(){
    const checked = els.avecVehicule.checked;
    els.vehiculeFields.style.display = checked ? 'block' : 'none';
    if(!checked){
      ['marqueVehicule','modeleVehicule','plaqueVehicule'].forEach(id => { const e = document.getElementById(id); if(e) e.value=''; });
    }
  }

  function updateTravelType(){
    const type = document.querySelector('input[name="typeVoyage"]:checked')?.value;
    const dateRetourContainer = $('#dateRetourContainer');
    const retourDifferentFields = $('#retourDifferentFields');
    const isRetour = type === 'allerRetour' || type === 'retourDifferent';
    dateRetourContainer.style.display = isRetour ? 'block' : 'none';
    retourDifferentFields.style.display = type === 'retourDifferent' ? 'block' : 'none';
    if(!isRetour){ const dr = $('#dateRetour'); if(dr) dr.value = ''; }
    if(type !== 'retourDifferent'){ const vr = $('#villeRetour'); if(vr) vr.value = ''; }
  }

  // PASSAGERS : dynamique
let passengerCount = 0;
function addPassengerField() {
    passengerCount++;
    const idx = passengerCount;
    const div = document.createElement('div');
    div.className = 'passenger-block section-block';
    div.id = `passenger-${idx}`;

    div.innerHTML = `
      <h3 style="display:flex;align-items:center;justify-content:space-between">

        <span style="display:flex;align-items:center;gap:10px;">
          <svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" viewBox="0 0 640 640">
            <path d="M240 192C240 147.8 275.8 112 320 112C364.2 112 400 147.8 400 192C400 236.2 364.2 272 320 272C275.8 272 240 236.2 240 192zM448 192C448 121.3 390.7 64 320 64C249.3 64 192 121.3 192 192C192 262.7 249.3 320 320 320C390.7 320 448 262.7 448 192zM144 544C144 473.3 201.3 416 272 416L368 416C438.7 416 496 473.3 496 544L496 552C496 565.3 506.7 576 520 576C533.3 576 544 565.3 544 552L544 544C544 446.8 465.2 368 368 368L272 368C174.8 368 96 446.8 96 544L96 552C96 565.3 106.7 576 120 576C133.3 576 144 565.3 144 552L144 544z"/>
          </svg>
          Passager ${idx + 1}
        </span>

        <button type="button" onclick="removePassengerField('passenger-${idx}')"
          style="background:transparent;border:none;color:#b00;cursor:pointer;display:flex;align-items:center;gap:6px">
            <svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 640 640">
              <path fill="#c11515" d="M136 192C136 125.7 189.7 72 256 72C322.3 72 376 125.7 376 192C376 258.3 322.3 312 256 312C189.7 312 136 258.3 136 192zM48 546.3C48 447.8 127.8 368 226.3 368L285.7 368C384.2 368 464 447.8 464 546.3C464 562.7 450.7 576 434.3 576L77.7 576C61.3 576 48 562.7 48 546.3zM472 232L616 232C629.3 232 640 242.7 640 256C640 269.3 629.3 280 616 280L472 280C458.7 280 448 269.3 448 256C448 242.7 458.7 232 472 232z"/>
            </svg>
            Retirer
        </button>
      </h3>

      <label>Nom</label>
      <input class="input-style" name="nomPassager${idx}" required>

      <label>Prénom</label>
      <input class="input-style" name="prenomPassager${idx}" required>

      <label>Date de naissance</label>
      <input type="date" class="input-style" name="dateNaissancePassager${idx}" required>

      <label>Lieu de naissance</label>
      <input class="input-style" name="lieuNaissancePassager${idx}" required>

      <label>Nationalité</label>
      <input class="input-style" name="nationalitePassager${idx}" required>

      <label>N° Passeport</label>
      <input class="input-style" name="numPasseportPassager${idx}" required>

      <label>Date d'expiration du passeport</label>
      <input type="date" class="input-style" name="dateExpirationPasseportPassager${idx}" required>
    `;

    els.additionalPassengers.appendChild(div);
}


  window.removePassengerField = function(id){
    const el = document.getElementById(id);
    if(!el) return;
    el.remove();
    passengerCount--;
    if (passengerCount < 0) passengerCount = 0;


    // Rebuild numbering
    const blocks = $$('.passenger-block');
    blocks.forEach((b, i) => {

        const num = i + 1;
        b.id = `passenger-${num}`;

        // Recreate the correct H3 with the SVG icon + button
        const h3 = b.querySelector('h3');
        if(h3){
            h3.innerHTML = `
                <span style="display:flex;align-items:center;gap:10px;">
                    <svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" viewBox="0 0 640 640">
                        <path d="M240 192C240 147.8 275.8 112 320 112C364.2 112 400 147.8 400 192C400 236.2 364.2 272 320 272C275.8 272 240 236.2 240 192zM448 192C448 121.3 390.7 64 320 64C249.3 64 192 121.3 192 192C192 262.7 249.3 320 320 320C390.7 320 448 262.7 448 192zM144 544C144 473.3 201.3 416 272 416L368 416C438.7 416 496 473.3 496 544L496 552C496 565.3 506.7 576 520 576C533.3 576 544 565.3 544 552L544 544C544 446.8 465.2 368 368 368L272 368C174.8 368 96 446.8 96 544L96 552C96 565.3 106.7 576 120 576C133.3 576 144 565.3 144 552L144 544z"/>
                    </svg>
                    Passager ${num + 1}
                </span>

                <button type="button"
                        onclick="removePassengerField('passenger-${num}')"
                        style="background:transparent;border:none;color:#b00;cursor:pointer;display:flex;align-items:center;gap:6px;">
                    
                    <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 640 640">
                        <path fill="#c11515" d="M136 192C136 125.7 189.7 72 256 72C322.3 72 376 125.7 376 192C376 258.3 322.3 312 256 312C189.7 312 136 258.3 136 192zM48 546.3C48 447.8 127.8 368 226.3 368L285.7 368C384.2 368 464 447.8 464 546.3C464 562.7 450.7 576 434.3 576L77.7 576C61.3 576 48 562.7 48 546.3zM472 232L616 232C629.3 232 640 242.7 640 256C640 269.3 629.3 280 616 280L472 280C458.7 280 448 269.3 448 256C448 242.7 458.7 232 472 232z"/>
                    </svg>

                    Retirer
                </button>
            `;
        }

        // Update input names
        [
            'nomPassager','prenomPassager','dateNaissancePassager',
            'lieuNaissancePassager','nationalitePassager','numPasseportPassager',
            'dateExpirationPasseportPassager'
        ].forEach(base => {
            const elField = b.querySelector(`[name^="${base}"]`);
            if(elField) elField.name = `${base}${num}`;
        });
    });
};


  // Form submit
  els.travelForm.addEventListener('submit', async function(e){
    e.preventDefault();
    const msg = els.messageBox;
    const btn = els.submitButton;
    btn.disabled = true; btn.textContent = 'Envoi...';
    msg.style.display = 'block'; msg.style.background = '#f0f4f8'; msg.style.color = '#0a1a2f'; msg.textContent = 'Envoi en cours...';

    // build FormData
    const fd = new FormData(this);

    try{
      if(!GOOGLE_SHEETS_WEB_APP_URL){ throw new Error('URL du script non définie'); }
      const res = await fetch(GOOGLE_SHEETS_WEB_APP_URL, { method: 'POST', body: fd, mode: 'cors' });
      if(!res.ok){ const txt = await res.text(); throw new Error(`Erreur ${res.status}: ${txt}`); }
      msg.style.background = '#e6ffed'; msg.style.color = '#064e3b'; msg.textContent = '✅ Demande envoyée avec succès.';
      this.reset();
      // clear dynamic sections
      els.additionalPassengers.innerHTML = '';
      passengerCount = 0;
      updateFormFields(); updateTravelType();
    }catch(err){
      console.error(err);
      msg.style.background = '#ffe6e6'; msg.style.color = '#7f1d1d'; msg.textContent = '❌ Erreur lors de l\'envoi : ' + (err.message || err);
    }finally{
      btn.disabled = false; btn.textContent = 'Demander un devis';
    }
  });

  // small initial bindings
  document.addEventListener('change', (ev) => {
    const t = ev.target;
    if(t.name === 'mode') updateFormFields();
    if(t.id === 'compagnieMaritime') updateBateauOptions();
    if(t.id === 'compagnieAerienne') updateAvionFields();
    if(t.id === 'avecVehicule') toggleVehiculeFields();
    if(t.name === 'typeVoyage') updateTravelType();
  });

const arr = document.getElementById("aeroportArrivee");

function updateArriveeIcon() {
    arr.setAttribute("value", arr.value);
}

updateArriveeIcon();
arr.addEventListener("change", updateArriveeIcon);

const dep = document.getElementById("aeroportDepart");

function updatedepartIcon() {
    dep.setAttribute("value", dep.value);
}

updatedepartIcon();
dep.addEventListener("change", updatedepartIcon);

  // expose addPassengerField globally (used on button)
  window.addPassengerField = addPassengerField;

  // ALSO expose functions referenced by inline attributes so inline handlers don't throw
  window.updateFormFields = updateFormFields;
  window.updateBateauOptions = updateBateauOptions;
  window.updateAvionFields = updateAvionFields;
  window.toggleVehiculeFields = toggleVehiculeFields;
  window.updateTravelType = updateTravelType;

  // DOMContentLoaded initialisation
  document.addEventListener('DOMContentLoaded', () => {
    // If inputs were toggled before script loaded, ensure listeners/effects are synced
    updateFormFields();
    updateBateauOptions();
    updateAvionFields();
    updateTravelType();

    // Attach small inline-friendly event listeners for radios/selects so inline handlers not necessary
    document.querySelectorAll('input[name="mode"]').forEach(r => r.addEventListener('change', updateFormFields));
    const compMar = document.getElementById('compagnieMaritime'); if(compMar) compMar.addEventListener('change', updateBateauOptions);
    const compAir = document.getElementById('compagnieAerienne'); if(compAir) compAir.addEventListener('change', updateAvionFields);
    const veh = document.getElementById('avecVehicule'); if(veh) veh.addEventListener('change', toggleVehiculeFields);
    document.querySelectorAll('input[name="typeVoyage"]').forEach(r => r.addEventListener('change', updateTravelType));
  });

})();
document.querySelectorAll(".type-btn").forEach(btn => {
    btn.addEventListener("click", () => {

        // remove active class from all buttons
        document.querySelectorAll(".type-btn").forEach(b => b.classList.remove("active"));

        // activate clicked button
        btn.classList.add("active");

        // update hidden input
        const value = btn.getAttribute("data-value");
        document.getElementById("typeVoyage").value = value;

        // show hide sections
        if (value === "allerSimple") {
            document.getElementById("dateRetourContainer").style.display = "none";
            document.getElementById("retourDifferentFields").style.display = "none";
        }

        if (value === "allerRetour") {
            document.getElementById("dateRetourContainer").style.display = "block";
            document.getElementById("retourDifferentFields").style.display = "none";
        }

        if (value === "retourDifferent") {
            document.getElementById("dateRetourContainer").style.display = "none";
            document.getElementById("retourDifferentFields").style.display = "block";
        }
    });
});
// --- GESTION TYPE DE VOYAGE (comme test5) ---
const typeButtons = document.querySelectorAll(".type-btn");
const typeVoyageInput = document.getElementById("typeVoyage");
const dateRetourContainer = document.getElementById("dateRetourContainer");
const retourDifferentFields = document.getElementById("retourDifferentFields");

typeButtons.forEach(btn => {
    btn.addEventListener("click", () => {

        // bouton actif
        typeButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        // valeur sélectionnée
        const value = btn.dataset.value;
        typeVoyageInput.value = value;

        // logique d’affichage
        if (value === "allerSimple") {
            dateRetourContainer.style.display = "none";
            retourDifferentFields.style.display = "none";
        }
        else if (value === "allerRetour") {
            dateRetourContainer.style.display = "block";
            retourDifferentFields.style.display = "none";
        }
        else if (value === "retourDifferent") {
            dateRetourContainer.style.display = "block";
            retourDifferentFields.style.display = "block";
        }
    });
});

</script>

</body>
</html>



